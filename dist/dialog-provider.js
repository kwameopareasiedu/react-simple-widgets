"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./tslib.es6-b49e58b3.js"),i=require("./style-inject.es-dcee06b6.js"),n=require("react"),t=require("./dialog-provider-context-06b8b83b.js"),r=require("./types-63681d00.js");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=o(n);i.styleInject("#dialog-view-container.react-simple-widget {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  pointer-events: none;\n  z-index: 999999;\n}\n#dialog-view-container.react-simple-widget > * {\n  pointer-events: all;\n}");i.styleInject(".react-simple-widget.dialog-view {\n  position: fixed;\n  display: flex;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.6);\n  overflow: auto;\n}\n.react-simple-widget.dialog-view .dialog-view-content {\n  width: 100%;\n  margin: auto;\n  padding: 15px;\n}\n@media screen and (min-width: 576px) {\n  .react-simple-widget.dialog-view .dialog-view-content.small-dialog {\n    max-width: 360px;\n  }\n}\n@media screen and (min-width: 768px) {\n  .react-simple-widget.dialog-view .dialog-view-content.medium-dialog {\n    max-width: 480px;\n  }\n}\n@media screen and (min-width: 992px) {\n  .react-simple-widget.dialog-view .dialog-view-content.wide-dialog {\n    max-width: 640px;\n  }\n}\n.react-simple-widget.dialog-view .dialog-view-content.full-dialog {\n  max-width: 100%;\n}");var d=function(e){var i=e.dialog,t=n.useRef();return a.default.createElement("div",{className:"react-simple-widget dialog-view",onClick:function(e){!t.current.contains(e.target)&&i.options.backgroundDismissible&&i.onDismiss()}},a.default.createElement("div",{ref:t,className:function(){var e=["dialog-view-content"];switch(i.options.size){case r.DialogSize.FULL:e.push("full-dialog");break;case r.DialogSize.WIDE:e.push("wide-dialog");break;case r.DialogSize.MEDIUM:e.push("medium-dialog");break;case r.DialogSize.SMALL:default:e.push("small-dialog")}return e.join(" ")}()},i.widget))};exports.DialogProvider=function(i){var r=i.children,o=n.useState([]),l=o[0],s=o[1],c=n.useRef([]),u=n.useRef(null),g=function(e,i){var n=function(t){"Escape"!==t.key||t.defaultPrevented||(t.stopImmediatePropagation(),t.stopPropagation(),i&&(e(),c.current=c.current.filter((function(e){return e!=n})),window.removeEventListener("keyup",n)))};c.current.unshift(n);for(var t=0,r=c.current;t<r.length;t++){var o=r[t];window.removeEventListener("keyup",o)}for(var a=0,d=c.current;a<d.length;a++){var l=d[a];window.addEventListener("keyup",l)}};return n.useEffect((function(){l.length>0?null===u.current&&(u.current=document.body.style.overflow,document.body.style.overflow="hidden"):(document.body.style.overflow=u.current,u.current=null)}),[l]),a.default.createElement(t.DialogProviderContext.Provider,{value:{showDialog:function(i,n){var t={id:Math.random().toString()},r=n||{},o=function(e){s((function(e){return e.filter((function(e){return e!==t}))})),r.onDismissed&&r.onDismissed(e);var i=c.current.splice(0,1)[0];i&&window.removeEventListener("keyup",i)};t.onDismiss=o,t.options=r,t.widget=i({dismiss:o}),s((function(i){return e.__spreadArray(e.__spreadArray([],i,!0),[t],!1)})),g(o,null==r.escapeDismissible||r.escapeDismissible)}}},r,a.default.createElement("div",{id:"dialog-view-container",className:"react-simple-widget"},l.map((function(e){return a.default.createElement(d,{key:e.id,dialog:e})}))))};
