"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=require("./style-inject.es-dcee06b6.js"),t=require("react");function e(n){return n&&"object"==typeof n&&"default"in n?n:{default:n}}var o=e(t);n.styleInject(".popup-menu-scrim {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: var(--rsw-popup-menu-scrim-bg-color);\n  -webkit-animation: fade-scrim-in var(--rsw-transition-duration) ease-out forwards;\n          animation: fade-scrim-in var(--rsw-transition-duration) ease-out forwards;\n  overflow: auto;\n  z-index: 2;\n}\n\n.popup-menu-options {\n  position: fixed;\n  width: -webkit-max-content !important;\n  width: -moz-max-content !important;\n  width: max-content !important;\n  -webkit-animation: reveal-options var(--rsw-transition-duration) ease-out forwards;\n          animation: reveal-options var(--rsw-transition-duration) ease-out forwards;\n  z-index: 3;\n}\n\n@-webkit-keyframes reveal-options {\n  from {\n    opacity: 0;\n    transform: scale(0.5);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n@keyframes reveal-options {\n  from {\n    opacity: 0;\n    transform: scale(0.5);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n@-webkit-keyframes fade-scrim-in {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n@keyframes fade-scrim-in {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}");exports.PopupMenu=function(n){var e=n.children,r=t.useState(!1),i=r[0],a=r[1],c=t.useState(null),s=c[0],u=c[1],l=t.Children.toArray(e),d=l[0],f=l[1],m=t.useRef(),p=t.useRef(),v=t.useState(!1),w=v[0],y=v[1],b=Array.isArray(e)&&"function"==typeof f?f:null,h=function(){a(!i);var n=d.props.onClick;n&&n()},g=function(){var n=m.current.getBoundingClientRect(),t=n.left,e=n.right,o=n.bottom,r=n.top,i=p.current.getBoundingClientRect().right,a=o,c=window.innerHeight-r,s=p.current.scrollHeight,l=s>window.innerHeight,d=s<=c,f=s<a,v=i+.06*document.body.clientWidth>document.body.clientWidth,w=[0,0],y={};l?(y.top=0,y.bottom=0,y.overflow="auto",v?(w[0]=100,y.right=document.body.clientWidth-e):(w[0]=0,y.left=t)):(v?(w[0]=100,y.right=document.body.clientWidth-e):(w[0]=0,y.left=t),d?(y.top=r,w[1]=0):f&&(y.bottom=window.innerHeight-o,w[1]=100)),y.transformOrigin="".concat(w[0],"% ").concat(w[1],"%"),u(y)};return t.useEffect((function(){var n=function(){a(!1)};return i&&(window.addEventListener("scroll",n),document.addEventListener("scroll",n),document.body.addEventListener("scroll",n)),function(){window.removeEventListener("scroll",n),document.removeEventListener("scroll",n),document.body.removeEventListener("scroll",n)}}),[i]),t.useEffect((function(){i&&p.current?(w||y(!0),g()):(u(null),y(!1))}),[i]),t.useEffect((function(){w&&g()}),[w]),o.default.createElement(o.default.Fragment,null,t.cloneElement(d,{ref:m,onClick:h}),i&&o.default.createElement("div",{className:"popup-menu-scrim",onClick:h}),i&&(b||f)&&o.default.createElement("div",{ref:p,className:"popup-menu-options",onClick:b?null:h,style:s},b?b((function(){return a(!1)})):f))};
